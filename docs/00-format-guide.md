---
depends_on:
  - ./00-writing-guide.md
tags: [governance, format, structure, metadata]
ai_summary: "文書構造・分量制限・メタ情報・図・命名規則・相互参照のフォーマット規範を定義"
---

# フォーマット規範

> Status: Active
> 最終更新: YYYY-MM-DD

文書の構造とフォーマットに関するルールを定義する。文章の書き方は[記載規範](./00-writing-guide.md)を参照。

---

## 構造規範

### 見出し階層

見出しは必ず順序を守る。飛ばさない。

```
# H1 - ドキュメントタイトル（1ファイル1つのみ）
## H2 - 主要セクション
### H3 - サブセクション
#### H4 - 詳細項目（必要な場合のみ）
```

### 1ファイル1責務

1つのドキュメントで1つのトピックを扱う。複数のトピックを混在させない。

### 見出しによる識別

見出しテキスト自体が識別子として機能する。IDや番号を別途付与しない。

- 見出し名は一意かつ具体的に書く（「概要」「詳細」のような汎用名は避ける）
- 相互参照時はMarkdownアンカーを使用: `[ユーザー登録フロー](./flows.md#ユーザー登録フロー)`
- テーブル内で列挙する場合のみ、行番号列（`#`）を付与する
- テーブルとセクション見出しで相互参照する場合、ドメイン固有のプレフィックスID（`F001`、`S001`等）を許容する

### 表形式の活用

比較・一覧は表で記載する。箇条書きより表を優先。

---

## 分量ガイドライン

| レベル | 上限 | 超過時の対応 |
|--------|------|--------------|
| 1文 | 60文字程度 | 分割する |
| 1段落 | 3-5文 | 段落を分ける |
| 1セクション（H2） | 50行 | サブセクション（H3）に分割 |
| 1ファイル | 200行 | 別ファイルに分割し相互リンク |
| 1テーブル | 15行 | カテゴリ別に表を分割 |
| 1 Mermaid図 | 15ノード | 概要図と詳細図に分割 |

### 分割の原則

- ファイル分割時は親ファイルにナビゲーションリンクを残す
- 分割先ファイルにも元ファイルへの参照を設置する
- 表の分割時はカテゴリ見出し（H3/H4）で区切る

---

## 相互参照規範

### リンク形式

相対パスを使用する：

```markdown
[参照先のタイトル](../path/to/file.md)
```

### 関連ドキュメントセクション

各ファイル末尾に「関連ドキュメント」セクションを設置し、リンクと1文の内容要約を記載する。

```markdown
## 関連ドキュメント

- [データモデル](../03-details/data-model.md) - エンティティ定義とER図
- [APIエンドポイント](../03-details/api.md) - REST APIの仕様
```

---

## メタ情報規範

### YAML Front Matter（機械用）

各ドキュメント冒頭にYAML Front Matterを記載する。AI・ツールによるメタデータ抽出に使用する。

| フィールド | 必須 | 内容 |
|-----------|------|------|
| `depends_on` | 任意 | このドキュメントが前提とするファイルのパス一覧 |
| `tags` | 任意 | 検索・分類用のタグ |
| `ai_summary` | 必須 | 1文でファイル内容を要約（AIがファイルを開かず内容判断するため） |

### ステータス表示（人間用）

YAML Front Matterの直後、引用ブロック形式で人間向けのステータスを表示する。

| ステータス | 意味 |
|------------|------|
| **Draft** | 作成中。内容が不完全 |
| **Active** | 有効。現在の設計を反映 |
| **Deprecated** | 非推奨。参考情報として残す |

ADR（決定記録）は独自のステータス語彙を持つ: **Proposed** / **Accepted** / **Deprecated** / **Superseded**。詳細は[ADRテンプレート](./04-decisions/0001-template.md)を参照。

### 最終更新日

ステータスと同じ引用ブロック内に `最終更新: YYYY-MM-DD` 形式で記載する。テンプレートファイルではプレースホルダーとして `YYYY-MM-DD` を使用する。実プロジェクトで使用する際は実際の日付に置き換える。

### ドキュメント冒頭の完全形

```markdown
---
depends_on:
  - ../path/to/dependency.md
tags: [category1, category2]
ai_summary: "このドキュメントの内容を1文で要約"
---

# タイトル

> Status: Draft | Active | Deprecated
> 最終更新: YYYY-MM-DD

概要文（1-2文）
```

---

## 図の規範

### 使用ツール

**Mermaidのみ**を使用する。外部ツール（draw.io、Figma等）は使用しない。

理由：
- テキストベースでGit差分が取れる
- AIが読み書きできる
- 追加ツールのインストールが不要

### 図の種類と用途

| 図の種類 | Mermaid記法 | 用途 |
|----------|-------------|------|
| フローチャート | `flowchart` | 処理フロー、状態遷移 |
| ER図 | `erDiagram` | データモデル |
| シーケンス図 | `sequenceDiagram` | コンポーネント間通信 |
| C4図 | `C4Context`, `C4Container` | システム構成 |
| クラス図 | `classDiagram` | 構造の関係性 |

### 図の記載ルール

- 図には必ずタイトルをつける（見出しまたはキャプション）
- 図の前後に説明文を添える（図だけで終わらせない）
- 複雑な図は分割する

---

## ファイル命名規則

### 設計ドキュメント

番号付きディレクトリ + ケバブケースの英語ファイル名：

```
docs/01-overview/summary.md
docs/02-architecture/context.md
```

### ADR（Architecture Decision Record）

4桁番号 + ケバブケース：

```
04-decisions/0001-template.md
04-decisions/0002-use-typescript.md
```

### GitHub標準ファイル

番号なし、大文字。規範の適用対象外：

```
README.md, LICENSE, CONTRIBUTING.md, CHANGELOG.md
```

---

## 関連ドキュメント

- [記載規範](./00-writing-guide.md) - 文章の書き方ルール
- [Git規範](./00-git-guide.md) - コミットメッセージ・ブランチ命名・変更履歴管理
- [ドキュメントインデックス](./00-index.md) - ドキュメント全体のナビゲーション
